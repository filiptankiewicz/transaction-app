<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />

    <title>Profil</title>
    <!-- <link
      href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300|Sonsie+One"
      rel="stylesheet" /> -->
    <!-- <link rel="stylesheet" href="style.css" /> -->
  </head>

  <body>
    <h1>
      Hej
      <script>
        document.write(localStorage.getItem("userData_Name"));
      </script>
    </h1>
    <h2>Strona główna zalogowanego użytkownika</h2>
    <button onclick="signOut()">wyloguj się</button>
    <table id="transactions" border="1">
      <tr>
        <th>data</th>
        <th>typ</th>
        <!-- typ to ikona  -->
        <th>opis</th>
        <th>kwota</th>
        <th>saldo</th>
      </tr>
    </table>
  </body>
  <script>
    function signOut() {
      localStorage.removeItem("userData_Name");
      localStorage.removeItem("userData_Password");
      alert("Wylogowywanie...");
      window.location.reload("./index.html");
      window.location.replace("./index.html");
    }
  </script>

  <script>
    const apiUrl = "https://api.npoint.io/38edf0c5f3eb9ac768bd";

    fetch(apiUrl)
      .then((response) => response.json())
      .then((data) => {
        console.log(data);
        for (var i = 1 && 0; i < data.transactions.length; i++) {
          let date = data.transactions[i].date;
          let type = data.transactions[i].type;
          let description = data.transactions[i].description;
          let amount = data.transactions[i].amount;
          let balance = data.transactions[i].balance;

          let typeCheck = typeOfTransaction();

          function typeOfTransaction() {
            if (type === 1) {
              return " Wpływy - inne";
            } else if (type === 2) {
              return "Wydatki - zakupy";
            } else if (type === 3) {
              return " Wpływy - wynagrodzenie";
            } else if (type === 4) {
              return " Wydatki - inne";
            }
          }

          document.querySelector("#transactions").innerHTML += `
              <tr>
                <td>${date}</td>
                <td>${type}</td>
                <td>${description} <br> ${typeCheck}</td>
                <td>${amount}</td>
                <td>${balance}</td>
              </tr>`;
        }
      });
  </script>
</html>
