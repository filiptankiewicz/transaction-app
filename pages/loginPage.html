<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Logowanie</title>
    <!-- <link
      href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300|Sonsie+One"
      rel="stylesheet" /> -->
    <!-- <link rel="stylesheet" href="style.css" /> -->
  </head>
  <body>
    <div>
      <h1>Ekran Logowania</h1>
      <button onclick="goBack()">Powrót</button>
      <form role="form" autocomplete="off">
        <label>Nazwa:</label>
        <input type="text" id="name" placeholder="Enter name" name="name" />
        <label>Hasło:</label>
        <input
          type="password"
          id="password"
          placeholder="Enter password"
          name="password"
        />
        <button type="button" onclick="signIn()">Zaloguj</button>
      </form>
    </div>
  </body>
  <script>
    function signIn() {
      let userFromLocalStorage = JSON.parse(
        localStorage.getItem("allUsersData")
      )
        ? JSON.parse(localStorage.getItem("allUsersData"))
        : [];

      let userLoginData = {
        name: document.getElementById("name").value,
        password: document.getElementById("password").value,
      };

      let userSignedIn = userFromLocalStorage.filter((userData) => {
        return (
          userData.name == userLoginData.name &&
          userData.password == userLoginData.password
        );
      })[0];

      if (userSignedIn) {
        alert("Logowanie zakończone sukcesem!");
        window.location.replace("./homeOnlinePage.html");
        localStorage.setItem("userData_Name", userSignedIn.name);
      } else {
        alert("Logowanie zakończone niepowodzeniem");
      }
    }
  </script>
  <script>
    function goBack() {
      window.location.href = "./index.html";
    }
  </script>
</html>
